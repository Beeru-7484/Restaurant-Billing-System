import java.io.*;
import java.util.Scanner;

public class HotelBooking {

    static final int TOTAL_ROOMS = 10;
    static boolean[] rooms = new boolean[TOTAL_ROOMS];
    static final String FILE_NAME = "rooms.txt";

    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);

        loadRoomsFromFile();

        while (true) {
            System.out.println("\n--- Hotel Booking Management System ---");
            System.out.println("1. View Available Rooms");
            System.out.println("2. Book a Room");
            System.out.println("3. Cancel Booking");
            System.out.println("4. Exit");
            System.out.print("Enter your choice: ");

            int choice;
            try {
                choice = scanner.nextInt();
            } catch (Exception e) {
                System.out.println("Invalid input.");
                scanner.next();
                continue;
            }

            switch (choice) {
                case 1:
                    showAvailableRooms();
                    break;
                case 2:
                    bookRoom(scanner);
                    break;
                case 3:
                    cancelBooking(scanner);
                    break;
                case 4:
                    saveRoomsToFile();
                    System.out.println("Data saved. Exiting...");
                    scanner.close();
                    return;
                default:
                    System.out.println("Invalid choice.");
            }
        }
    }

    // Load room data from file
    static void loadRoomsFromFile() {
        File file = new File(FILE_NAME);

        if (!file.exists()) {
            for (int i = 0; i < TOTAL_ROOMS; i++) {
                rooms[i] = true;
            }
            saveRoomsToFile();
            return;
        }

        try (BufferedReader br = new BufferedReader(new FileReader(FILE_NAME))) {
            for (int i = 0; i < TOTAL_ROOMS; i++) {
                rooms[i] = br.readLine().equals("1");
            }
        } catch (Exception e) {
            System.out.println("Error loading file.");
        }
    }

    // Save room data to file
    static void saveRoomsToFile() {
        try (BufferedWriter bw = new BufferedWriter(new FileWriter(FILE_NAME))) {
            for (boolean room : rooms) {
                bw.write(room ? "1" : "0");
                bw.newLine();
            }
        } catch (Exception e) {
            System.out.println("Error saving file.");
        }
    }

    static void showAvailableRooms() {
        boolean found = false;
        System.out.println("\nAvailable Rooms:");
        for (int i = 0; i < TOTAL_ROOMS; i++) {
            if (rooms[i]) {
                System.out.println("Room " + (i + 1));
                found = true;
            }
        }
        if (!found) {
            System.out.println("No rooms available.");
        }
    }

    static void bookRoom(Scanner scanner) {
        showAvailableRooms();
        System.out.print("Enter room number to book: ");
        int room = scanner.nextInt();

        if (room < 1 || room > TOTAL_ROOMS) {
            System.out.println("Invalid room number.");
        } else if (!rooms[room - 1]) {
            System.out.println("Room already booked.");
        } else {
            rooms[room - 1] = false;
            saveRoomsToFile();
            System.out.println("Room booked successfully.");
        }
    }

    static void cancelBooking(Scanner scanner) {
        System.out.print("Enter room number to cancel: ");
        int room = scanner.nextInt();

        if (room < 1 || room > TOTAL_ROOMS) {
            System.out.println("Invalid room number.");
        } else if (rooms[room - 1]) {
            System.out.println("Room is not booked.");
        } else {
            rooms[room - 1] = true;
            saveRoomsToFile();
            System.out.println("Booking cancelled.");
        }
    }
}
